<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
    <!-- Demo data for New Features (Scenarios 12-20) -->

    <!-- ========================================== -->
    <!-- SCENARIO 12: Kalkulasi Materialitas dan Pemetaan Akun -->
    <!-- ========================================== -->

    <record id="demo_materiality_calc_2024" model="icofr.materiality">
        <field name="name">Perhitungan Materialitas Tahun 2024</field>
        <field name="fiscal_year">2024</field>
        <field name="company_id" ref="base.main_company"/>
        <field name="revenue_amount">1000000000000</field>
        <field name="total_assets_amount">1500000000000</field>
        <field name="total_expense_amount">800000000000</field>
        <field name="total_liability_amount">900000000000</field>
        <field name="net_income_amount">100000000000</field>
        <field name="overall_materiality_percent">0.5</field>
        <field name="performance_materiality_percent">75.0</field>
        <field name="materiality_basis">revenue</field>
        <field name="calculation_method">percent_revenue</field>
        <field name="active">True</field>
    </record>

    <record id="demo_account_mapping_rev_2024" model="icofr.account.mapping">
        <field name="name">Pemetaan Pendapatan 2024</field>
        <field name="code">AM-REV-001</field>
        <field name="gl_account">41001</field>
        <field name="gl_account_description">Pendapatan Operasional</field>
        <field name="fsl_item">Revenue</field>
        <field name="account_balance">700000000000.0</field> <!-- 700B / 1000B = 70% (Significant) -->
        <field name="significance_level">significant</field>
        <field name="materiality_id" ref="demo_materiality_calc_2024"/>
        <field name="status">active</field>
    </record>

    <record id="demo_user_line1_process_owner" model="res.users">
        <field name="name">Lini 1 (Process Owner)</field>
        <field name="login">line1_owner</field>
        <field name="password">Line1Owner123</field>
        <field name="email">line1@demo.com</field>
    </record>

    <record id="demo_user_line2_risk_manager" model="res.users">
        <field name="name">Lini 2 (Risk Manager)</field>
        <field name="login">line2_risk</field>
        <field name="password">Line2Risk123</field>
        <field name="email">line2@demo.com</field>
    </record>

    <record id="demo_user_line3_internal_auditor" model="res.users">
        <field name="name">Lini 3 (Internal Auditor)</field>
        <field name="login">line3_audit</field>
        <field name="password">Line3Audit123</field>
        <field name="email">line3@demo.com</field>
    </record>

    <!-- ========================================== -->
    <!-- SCENARIO 14: Temuan dan Klasifikasi (Table 24 Compliance) -->
    <!-- ========================================== -->

    <record id="demo_finding_significant_def" model="icofr.finding">
        <field name="name">Kekurangan Signifikan Otorisasi</field>
        <field name="code">FIND-SIG-001</field>
        <field name="finding_type">significant_deficiency</field>
        <field name="severity_level">high</field>
        <field name="quantitative_impact_amount">600000000.0</field> <!-- > PM 500M -->
        <field name="description">Beberapa otorisasi dilakukan oleh pihak yang tidak berwenang.</field>
        <field name="owner_id" ref="demo_user_line1_process_owner"/>
        <field name="status">open</field>
        <!-- Reporting Compliance (Table 24) -->
        <field name="reported_to_ceo" eval="True"/>
        <field name="reported_to_board" eval="True"/>
        <field name="reported_to_audit_committee" eval="True"/>
        <field name="reported_to_mgmt_assessment" eval="True"/>
    </record>

    <!-- ========================================== -->
    <!-- SCENARIO 20: Skenario Lanjutan -->
    <!-- ========================================== -->

    <record id="demo_service_org_sso" model="icofr.service.organization">
        <field name="name">BUMN Shared Service Center (Finance)</field>
        <field name="code">SSO-FIN</field>
        <field name="has_right_to_audit" eval="True"/>
        <field name="service_description">Layanan keuangan terpusat untuk grup BUMN.</field>
    </record>

    <record id="demo_soc_report_001" model="icofr.soc.report">
        <field name="name">SOC 1 Type 2 - FY2024</field>
        <field name="service_org_id" ref="demo_service_org_sso"/>
        <field name="report_type">soc1_t2</field>
        <field name="period_start">2024-01-01</field>
        <field name="period_end">2024-10-31</field>
        <field name="conclusion">unqualified</field>
        <field name="has_bridge_letter" eval="True"/>
        <field name="gap_analysis_notes">Cakupan Bridge Letter s/d 31 Des 2024.</field>
    </record>

    <record id="demo_materiality_subsidiary_final" model="icofr.materiality">
        <field name="name">Materialitas PT Anak Perusahaan B (Final Demo)</field>
        <field name="fiscal_year">2024</field>
        <field name="company_id" ref="base.main_company"/>
        <field name="parent_materiality_id" ref="demo_materiality_calc_2024"/>
        <field name="revenue_amount">200000000000</field> 
        <field name="total_assets_amount">300000000000</field>
        <field name="total_expense_amount">150000000000</field>
        <field name="total_liability_amount">180000000000</field>
        <field name="overall_materiality_percent">1.0</field> <!-- 2B -->
        <field name="performance_materiality_percent">75.0</field>
        <field name="materiality_basis">revenue</field>
    </record>

    <record id="demo_ctrl_mrc_failed" model="icofr.control">
        <field name="name">Review Estimasi Cadangan (MRC)</field>
        <field name="code">CTRL-MRC-DEMO-001</field>
        <field name="control_specific_type">mrc</field>
        <field name="mrc_precision_threshold">Selisih > 5% atau > Rp 100 Juta</field>
        <field name="owner_id" ref="base.user_admin"/>
        <field name="control_type">detective</field>
        <field name="frequency">monthly</field>
        <field name="status">active</field>
        <field name="notes">Tabel 21 Compliance: Memerlukan bukti investigasi jika threshold terlewati.</field>
    </record>

    <record id="demo_testing_mrc_failed" model="icofr.testing">
        <field name="name">Uji MRC - Des 2024</field>
        <field name="control_id" ref="demo_ctrl_mrc_failed"/>
        <field name="test_type">toe</field>
        <field name="tester_id" ref="base.user_admin"/>
        <field name="test_date">2024-12-15</field>
        <field name="effectiveness">ineffective</field>
        <field name="has_december_sample" eval="True"/>
        <field name="mrc_threshold_appropriate">fail</field>
        <field name="mrc_investigation_proven">fail</field>
        <field name="test_results">Gagal presisi review (Tabel 21). Ambang batas tidak dipatuhi dan tidak ada investigasi atas anomali.</field>
    </record>

    <record id="demo_account_qualitative_covenant" model="icofr.account.mapping">
        <field name="name">Hutang Bank (Covenant)</field>
        <field name="code">AM-LIAB-COV-001</field>
        <field name="gl_account">21005</field>
        <field name="fsl_item">Liabilities</field>
        <field name="account_balance">500000000.0</field>
        <field name="is_loan_covenant" eval="True"/>
        <field name="is_qualitative_significant" eval="True"/>
        <field name="qualitative_justification">Loan Covenant constraint.</field>
        <field name="materiality_id" ref="demo_materiality_calc_2024"/>
        <field name="status">active</field>
    </record>

    <record id="demo_testing_interim_2024" model="icofr.testing">
        <field name="name">Pengujian Interim 2024</field>
        <field name="control_id" ref="icofr_demo.demo_ctrl_withdraw_001"/>
        <field name="test_type">toe</field>
        <field name="tester_id" ref="base.user_admin"/>
        <field name="test_date">2024-08-15</field>
        <field name="is_interim_test" eval="True"/>
        <field name="effectiveness">effective</field>
        <field name="roll_forward_procedures">Inquiry and observation.</field>
        <field name="roll_forward_conclusion">effective</field>
    </record>

    <record id="demo_risk_moc" model="icofr.risk">
        <field name="name">Risiko MOC - Jurnal Manual</field>
        <field name="code">RSK-MOC-001</field>
        <field name="risk_category">financial</field>
        <field name="risk_type">inherent</field>
        <field name="is_fraud_risk" eval="True"/>
        <field name="description">Management override risks.</field>
        <field name="likelihood">low</field>
        <field name="impact">very_high</field>
        <field name="owner_id" ref="base.user_admin"/>
    </record>

    <record id="demo_action_plan_moc" model="icofr.action.plan">
        <field name="name">Remediasi Kontrol MOC</field>
        <field name="description">Action plan for MOC.</field>
        <field name="action_owner_id" ref="base.user_admin"/>
        <field name="target_completion_date">2024-11-01</field>
        <field name="actual_completion_date">2024-11-05</field>
        <field name="status">completed</field>
    </record>

    <record id="demo_testing_remediation_valid" model="icofr.testing">
        <field name="name">Retest MOC - Dec 2024</field>
        <field name="control_id" ref="icofr_demo.demo_ctrl_withdraw_001"/>
        <field name="test_type">toe</field>
        <field name="tester_id" ref="base.user_admin"/>
        <field name="is_remediation_test" eval="True"/>
        <field name="action_plan_id" ref="demo_action_plan_moc"/>
        <field name="test_date">2024-12-20</field> 
        <field name="effectiveness">effective</field>
        <field name="test_results">Remediation valid per Tabel 23.</field>
    </record>

    <record id="demo_account_wip_infra" model="icofr.account.mapping">
        <field name="name">WIP BUMN Konstruksi (Proyek Strategis)</field>
        <field name="code">AM-WIP-001</field>
        <field name="gl_account">13005</field>
        <field name="fsl_item">Asset</field>
        <field name="account_balance">4500000000.0</field>
        <field name="is_construction_wip" eval="True"/>
        <field name="is_qualitative_significant" eval="True"/>
        <field name="qualitative_justification">Proyek infrastruktur jangka panjang dengan risiko estimasi pengakuan pendapatan yang tinggi.</field>
        <field name="materiality_id" ref="demo_materiality_calc_2024"/>
        <field name="status">active</field>
    </record>

    <record id="demo_finding_sad_log" model="icofr.finding">
        <field name="name">Selisih Kurs (Log SAD)</field>
        <field name="code">FIND-SAD-001</field>
        <field name="finding_type">control_deficiency</field>
        <field name="severity_level">low</field>
        <field name="quantitative_impact_amount">200000000.0</field> 
        <field name="owner_id" ref="base.user_admin"/>
        <field name="status">closed</field>
        <!-- Reporting for CD (CEO and Audit Committee) -->
        <field name="reported_to_ceo" eval="True"/>
        <field name="reported_to_audit_committee" eval="True"/>
    </record>

    </data>
</odoo>
